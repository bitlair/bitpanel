void setup() {                
  // initialize the digital pin as an output.
  // Pin 13 has an LED connected on most Arduino boards:
  pinMode(13, OUTPUT);
  pinMode(11, OUTPUT);
  pinMode(10, OUTPUT);
  pinMode(9, OUTPUT);
  pinMode(8, OUTPUT);
  
  DDRA=0xff;
  DDRC=0xff;
  DDRC=0xff;
  DDRF=0xff;
  
}

unsigned char dispdata0[][10]=
{{0xAA,0x00,0x00,0x00,0x00, 0x40,0x00,0x00,0x00,0x00},
 {0x80,0x82,0x00,0x00,0x00, 0x40,0x00,0x00,0x40,0x00},
 {0x80,0x80,0x00,0x80,0x00, 0x40,0x00,0x00,0x00,0x00},
 {0xAA,0x02,0x02,0xA0,0x00, 0x40,0x05,0x50,0x40,0x15},
 {0x80,0x82,0x00,0x80,0x00, 0x40,0x10,0x10,0x40,0x40},
 {0x80,0x82,0x00,0x80,0x00, 0x40,0x10,0x10,0x40,0x40},
 {0x80,0x82,0x00,0xA0,0x00, 0x40,0x10,0x50,0x40,0x40},
 {0xAA,0x00,0x00,0x00,0x00, 0x55,0x45,0x10,0x00,0x00},
 
 {0x55,0x00,0x00,0x00,0x00, 0x80,0x00,0x00,0x00,0x00},
 {0x40,0x41,0x00,0x00,0x00, 0x80,0x00,0x00,0x80,0x00},
 {0x40,0x40,0x00,0x40,0x00, 0x80,0x00,0x00,0x00,0x00},
 {0x55,0x01,0x01,0x50,0x00, 0x80,0x0A,0xA0,0x80,0x2A},
 {0x40,0x41,0x00,0x40,0x00, 0x80,0x20,0x20,0x80,0x80},
 {0x40,0x41,0x00,0x40,0x00, 0x80,0x20,0x20,0x80,0x80},
 {0x40,0x41,0x00,0x50,0x00, 0x80,0x20,0xA0,0x80,0x80},
 {0x55,0x00,0x00,0x00,0x00, 0xAA,0x8A,0x20,0x00,0x00},
 
 {0xAA,0x00,0x00,0x00,0x00, 0x40,0x00,0x00,0x00,0x00},
 {0x80,0x82,0x00,0x00,0x00, 0x40,0x00,0x00,0x40,0x00},
 {0x80,0x80,0x00,0x80,0x00, 0x40,0x00,0x00,0x00,0x00},
 {0xAA,0x02,0x02,0xA0,0x00, 0x40,0x05,0x50,0x40,0x15},
 {0x80,0x82,0x00,0x80,0x00, 0x40,0x10,0x10,0x40,0x40},
 {0x80,0x82,0x00,0x80,0x00, 0x40,0x10,0x10,0x40,0x40},
 {0x80,0x82,0x00,0xA0,0x00, 0x40,0x10,0x50,0x40,0x40},
 {0xAA,0x00,0x00,0x00,0x00, 0x55,0x45,0x10,0x00,0x00}};

#define DEPTH 10
#define ROWS 24
unsigned char mask=0;
void loop() {
  unsigned char x,y,z,en;
  
  digitalWrite(9, HIGH);  //out dis
  
  digitalWrite(8, HIGH);   //data high
  digitalWrite(10, HIGH);  //shift
  
  
  for(y=0;y<ROWS;y++)
  {
      digitalWrite(10, HIGH);  //shift
      digitalWrite(10, LOW);
      digitalWrite(8, LOW);   //data low
    digitalWrite(9, HIGH);  //out dis
      digitalWrite(11, HIGH);  //store
      digitalWrite(11, LOW);
    
    if((y & 7)==0)
    {
       en=1;
    }
    PORTC=0x00;
    PORTK=0x00;
    PORTF=0x00;
    mask=0x00;
    for (z=0;z<3;z++)
    {
    for (x=0;x<DEPTH;x++)
    {
      PORTA=dispdata0[y][x] ^ mask;
      digitalWrite(13, HIGH);   // set the LED on
      digitalWrite(13, LOW);    // set the LED off
//    delay(1);
    }
  mask+=0x55;
  }
  digitalWrite(9, LOW);  //out en
    if((y & ~7)==0)
    {
      PORTC=en;
    }
    en<<=1;
    //delay(1);    
    delayMicroseconds(200);
  }
}
